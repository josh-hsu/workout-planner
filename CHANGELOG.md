# 更新日誌

## 2026-01-07 - 右鍵選單功能

### 新增功能

#### 播放清單建立器 (playlist_builder.py)

1. **右鍵選單**
   - 在課程分段資訊的分段項目上點擊右鍵，會出現選單
   - 選單包含三個選項：
     - 選擇分段
     - 預覽
     - 加入最愛/取消最愛

2. **選擇分段**
   - 功能等同於雙擊
   - 將選中的分段加入到播放清單

3. **預覽功能**
   - 彈出預覽視窗
   - 顯示分段的完整資訊（影片名稱、Track序號、歌名、訓練名稱、時間範圍）
   - 自動載入並播放該分段
   - 播放到分段結束時自動暫停
   - 包含獨立的影片播放器控制

4. **加入最愛/取消最愛**
   - 切換分段的最愛狀態
   - 自動更新顯示（★ 表示已加入最愛，☆ 表示未加入最愛）
   - 最愛資訊儲存在 .workout-planner 配置檔中
   - 顯示操作成功提示

### 技術細節

- 使用 tkinter 的 Menu 元件創建右鍵選單
- 綁定 `<Button-3>` 事件處理右鍵點擊
- 新增 `PreviewWindow` 類別處理預覽視窗
- 預覽視窗使用 `VideoPlayer` 元件
- 使用 `after()` 方法實現自動停止播放

### 使用方式

1. 開啟「建立課程播放清單」功能
2. 選擇課程種類
3. 在左側的分段項目上點擊右鍵
4. 選擇所需功能：
   - **選擇分段**：加入到播放清單
   - **預覽**：觀看該分段內容
   - **加入最愛/取消最愛**：標記常用分段

### 已修正問題

- 修正時間戳編輯器的匯出按鈕顯示問題
  - 調整 pack 順序，確保匯出按鈕固定在底部
  - 移除不相容的 `style='Accent.TButton'` 參數

## 初始版本

### 核心功能

1. **建立分段描述檔**
   - 載入 MP4 影片
   - 標記開始/結束時間
   - 編輯分段資訊
   - 匯出 JSON 描述檔

2. **建立課程播放清單**
   - 選擇課程種類
   - 瀏覽影片和分段
   - 組合播放清單
   - 匯出 XSPF 格式

3. **配置管理**
   - 最愛分段記錄
   - 播放統計
   - 偏好設定
